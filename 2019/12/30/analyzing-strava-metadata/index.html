<!DOCTYPE html>
<html lang="en">
  <head>
      <title>andy reagan</title>
    <meta charset="utf-8" />
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">




    <link rel="stylesheet" type="text/css" href="/theme/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/theme/css/beemuse.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/theme/css/base.css">
    <!-- <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/styles/default.min.css"> -->
    <!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/highlight.min.js"></script> -->
  </head>
  <body>

    <section id="navbar">
	  <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
	    <div class="container">
              <div class="navbar-header">
		<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
		  <span class="sr-only">Toggle navigation</span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		</button>
		<a class="navbar-brand" href="/index.html">andyreagan.com</a>
              </div>
              <div class="collapse navbar-collapse">
		<ul class="nav navbar-nav">
		  <li ><a href="/pages/blog.html">Blog</a></li>
		  <li ><a href="/pages/about-me.html">About</a></li>
		  <li ><a href="/pages/cv.html">CV</a></li>
		  <li ><a href="/pages/publications.html">Publications</a></li>
		  <li ><a href="/pages/teaching.html">Teaching</a></li>
		  <li ><a href="/pages/visualizations.html">Visualizations</a></li>
		</ul>
              </div><!--/.nav-collapse -->
	    </div>
	  </div>
    </section>

    <br>
<section class="content">
  <div class="row">
    
    <div class="col-xs-12 col-md-8  col-md-offset-2 col-lg-6 col-lg-offset-3">
      <div class="paper">
  <header>
    <h2 class="entry-title">
      <a href="/2019/12/30/analyzing-strava-metadata/" rel="bookmark"
         title="Permalink to Analyzing Strava metadata">Analyzing Strava metadata</a></h2>
 
  </header>
  <footer class="post-info">
    <abbr class="published" title="2019-12-30T00:00:00+01:00">
      Mon 30 December 2019
    </abbr>
  </footer><!-- /.post-info -->
  <br>
  <div class="entry-content">
    <p>I love running,
and I love stroller running with my son even more.
Strava is my go-to fitness app and I've tagged all of my stroller runs
with a searchable tag so I can count the miles we've logged together,
mostly while he has slept!</p>
<p>The search functionality on Strava's site doesn't provide summaries like total miles,
but I can search my own data easily using Python.</p>
<h2>Request your archive</h2>
<p>Go to your settings:</p>
<p><img src="/images/2019-12-30-strava-metadata/step-01.png" class="img-responsive"></p>
<p>Account page:</p>
<p><img src="/images/2019-12-30-strava-metadata/step-02.png" class="img-responsive"></p>
<p>Click the download button:</p>
<p><img src="/images/2019-12-30-strava-metadata/step-03.png" class="img-responsive"></p>
<p>Click this button:</p>
<p><img src="/images/2019-12-30-strava-metadata/step-04.png" class="img-responsive"></p>
<p>Then you'll get an email with a link to your data.</p>
<h2>Load up your data.</h2>
<p>This part is simple,
and to make things even easier I'll use Pandas.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;activities.csv&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<p>Then we can pull out all of the activies with type Run,
that contain the stroller tag, and sum up the miles all like this:</p>
<div class="highlight"><pre><span></span>run = df[&quot;Activity Type&quot;].str.contains(&quot;Run&quot;)
stroller = df[&quot;Activity Name&quot;].str.contains(&quot;#stroller&quot;)
miles = (df
    .loc[run &amp; stroller, :]  # filter
    .loc[:, &#39;Distance&#39;]  # select
    .astype(&#39;float&#39;)  # convert dtype
    .sum()/1.609  # sum and convert to miles
)
miles
</pre></div>


<p>Let's break that down: first, we select out two filters (type Run and stroller in the title),
then we convert the distance field to a float,
then we sum it up.
The last step converts km into miles.
I had actually first written it in one line,
as below,
but thought the above would be clearer.</p>
<div class="highlight"><pre><span></span>df.loc[df[&quot;Activity Type&quot;].str.contains(&quot;Run&quot;) &amp; df[&quot;Activity Name&quot;].str.contains(&quot;#stroller&quot;), :].Distance.astype(&#39;float&#39;).sum()/1.609
</pre></div>


<p>All told, by the end of 2019 I'll have logged 857 miles with my little man.</p>
  </div><!-- /.entry-content -->
      </div>
      </div>      
 </section><!-- /#content -->

    <footer id="slidingfooter" class="body">
      Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>. Site design by Andy Reagan.
    </footer><!-- /#contentinfo -->
  </body>
</script>
</html>